# Multi-Node Window-Per-Node Implementation Progress (v6 Baseline)

This document tracks implementation and testing progress for the v8 design/v8 simulation baseline.

## Legend
- File Status: `Pending`, `In Progress`, `Blocked`, `Completed`, `N/A`
- Unit/Integration Test Status: `Not Started`, `In Progress`, `Passed`, `Failed`, `Blocked`, `N/A`
- Design Follow-Up: `Not Needed`, `Needed`, `In Progress`, `Updated`

## Progress Log
- 2026-02-08: Large redesign started for concurrent multi-node requirement.
- 2026-02-08: Multiple runtime-simulation iterations completed.
- 2026-02-08: Deep v5 debug-trace pass added coverage for settings surface scoping and status fanout ownership.
- 2026-02-08: Design v7 / simulation v7 / implementation plan v5 finalized.
- 2026-02-08: Transcription removed from v1 scope because backend support is no longer available.
- 2026-02-08: Deep v8 runtime inspection added explicit plugin ownership/order and host-validation call-stack coverage.
- 2026-02-08: Implementation started on `codex/multi-node-window-v1-implementation`; completed `types/node.ts` and `utils/nodeEndpoints.ts` with passing unit tests.
- 2026-02-08: Implemented Electron main-process node window/registry IPC foundation, preload bridge updates, shared electron typings, and window node-context store with passing unit/electron transpile checks.
- 2026-02-08: Added `nodeStore` implementation (versioned snapshot apply, Electron IPC sync, add/remove/rename remote nodes) with passing unit tests.
- 2026-02-08: Added ordered startup plugins (`10.serverStore.client.ts`, `20.windowNodeBootstrap.client.ts`) and removed legacy `plugins/serverStore.ts` overlap; Apollo ownership merge still pending.
- 2026-02-08: Completed bound-node transport/readiness migrations for REST/WS/fetch paths (`services/api.ts`, run stores, workspace, terminal composable, definition stores) with passing targeted tests.
- 2026-02-08: Completed embedded-vs-remote UI/FS guard migrations (`fileExplorer.ts`, workspace selector, input drop flows, settings/server surfaces, app overlay gate, artifact/static URL builders) with passing targeted tests.
- 2026-02-08: Added node onboarding boundaries (`NodeManager.vue`, `nodeCapabilityProbe`, `nodeHostValidation`) and wired node settings entry with passing unit/component tests.
- 2026-02-08: Expanded shell/settings coverage with passing targeted tests for `app.vue` gating, `settings.vue` section fallback/default selection, and `layouts/default.vue` node-label/watch behavior.
- 2026-02-08: Restored browser `yarn dev` compatibility by making default embedded node base URL runtime-aware (`dev -> http://localhost:8000`, `electron -> http://localhost:29695`) in node/context stores and runtime config with passing targeted store/routing tests.

## Scope Change Log
| Date | Previous Scope | New Scope | Trigger | Required Action |
| --- | --- | --- | --- | --- |
| 2026-02-08 | Single active node, one window | Concurrent multi-node, one window per node | Requirement pivot | full redesign + re-simulation |
| 2026-02-08 | v4 baseline | v5 hardened baseline | deep runtime inspection findings | add settings/status-fanout and client-lifecycle use cases |
| 2026-02-08 | v5 baseline | v7 baseline | product scope update | remove transcription work from plan/progress/tests |
| 2026-02-08 | v7 baseline | v8 hardened baseline | deep runtime inspection findings | add plugin de-overlap + capability default + host-validation coverage |

## Completion Gate
- Mark a file `Completed` only when implementation is done and required tests are `Passed` or explicitly `N/A`.

## File-Level Progress Table

| File | Depends On | File Status | Unit Test File | Unit Test Status | Integration Test File | Integration Test Status | Cross-Reference Smell | Design Follow-Up | Last Verified | Verification Command | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| `/Users/normy/autobyteus_org/autobyteus-web/types/node.ts` | N/A | Completed | `types/__tests__/node.spec.ts` | Passed | N/A | N/A | None | Not Needed | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web exec vitest --run types/__tests__/node.spec.ts` | includes snapshot version, capability probe state, and registry change contracts |
| `/Users/normy/autobyteus_org/autobyteus-web/utils/nodeEndpoints.ts` | node types | Completed | `utils/__tests__/nodeEndpoints.spec.ts` | Passed | N/A | N/A | None | Not Needed | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web exec vitest --run utils/__tests__/nodeEndpoints.spec.ts` | endpoint derivation includes protocol normalization, known-suffix stripping, and health endpoint |
| `/Users/normy/autobyteus_org/autobyteus-web/electron/main.ts` | node contracts | In Progress | `electron/__tests__/nodeWindowManager.spec.ts` | Not Started | manual multi-window lifecycle + status fanout | Not Started | None | Updated | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web run transpile-electron` | node-registry persistence, node-window bindings, and new IPC handlers implemented; targeted main-process tests still pending |
| `/Users/normy/autobyteus_org/autobyteus-web/electron/preload.ts` | main IPC handlers | In Progress | `electron/__tests__/preload.bridge.spec.ts` | Not Started | N/A | N/A | None | Not Needed | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web run transpile-electron` | added open/focus/list window APIs, window-context + node-registry IPC bridge |
| `/Users/normy/autobyteus_org/autobyteus-web/electron/types.d.ts` | preload APIs | Completed | electron transpile/typecheck | Passed | N/A | N/A | None | Not Needed | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web run transpile-electron` | updated API surface for node window/registry methods and cleanup callbacks |
| `/Users/normy/autobyteus_org/autobyteus-web/types/electron.d.ts` | preload APIs | In Progress | app typecheck/build | Blocked | N/A | N/A | None | Updated | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web exec tsc --noEmit` | declaration updated, but repository-wide `tsc --noEmit` currently fails with large pre-existing unrelated baseline errors |
| `/Users/normy/autobyteus_org/autobyteus-web/stores/windowNodeContextStore.ts` | preload + node utils | In Progress | `stores/__tests__/windowNodeContextStore.spec.ts` | Passed | remote usable while embedded down | Not Started | None | Updated | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web exec vitest --run stores/__tests__/windowNodeContextStore.spec.ts` | added immutable window binding state, endpoint derivation, and health-gated readiness polling |
| `/Users/normy/autobyteus_org/autobyteus-web/stores/nodeStore.ts` | preload + node contracts | In Progress | `stores/__tests__/nodeStore.spec.ts` | Passed | concurrent update behavior | Not Started | None | Updated | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web exec vitest --run stores/__tests__/nodeStore.spec.ts` | includes stale snapshot rejection and Electron registry-sync/add-node/open-window paths |
| `/Users/normy/autobyteus_org/autobyteus-web/plugins/10.serverStore.client.ts` | serverStore | In Progress | plugin tests | Not Started | N/A | N/A | None | Updated | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web exec vitest --run stores/__tests__/nodeStore.spec.ts stores/__tests__/windowNodeContextStore.spec.ts` | deterministic server bootstrap plugin added; dedicated plugin test still pending |
| `/Users/normy/autobyteus_org/autobyteus-web/plugins/20.windowNodeBootstrap.client.ts` | context/node stores | In Progress | plugin tests | Not Started | N/A | N/A | None | Updated | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web exec vitest --run stores/__tests__/nodeStore.spec.ts stores/__tests__/windowNodeContextStore.spec.ts` | window context bootstrap + registry initialization plugin added |
| `/Users/normy/autobyteus_org/autobyteus-web/plugins/30.apollo.client.ts` | context store | Completed | `plugins/__tests__/apollo.client.spec.ts` | Passed | embedded+remote GraphQL manual | Not Started | None | Not Needed | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web exec vitest --run plugins/__tests__/apollo.client.spec.ts` | bound Apollo registration fixed for getter-only contexts |
| `/Users/normy/autobyteus_org/autobyteus-web/plugins/serverStore.ts`, `/Users/normy/autobyteus_org/autobyteus-web/plugins/apolloErrorLink.client.ts` | ordered plugin ownership design | In Progress | plugin bootstrap ownership tests | Not Started | startup ownership manual check | Not Started | Legacy overlap | Updated | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web run transpile-electron` | legacy `serverStore.ts` removed; `apolloErrorLink.client.ts` ownership merge remains |
| `/Users/normy/autobyteus_org/autobyteus-web/nuxt.config.ts` | Apollo strategy | In Progress | targeted vitest smoke | Passed | electron startup smoke | Not Started | None | Not Needed | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web exec vitest --run plugins/__tests__/apollo.client.spec.ts services/__tests__/api.nodeRouting.spec.ts` | removed static `@nuxtjs/apollo` module coupling and `apollo` config block |
| `/Users/normy/autobyteus_org/autobyteus-web/utils/nodeCapabilityProbe.ts` | node types/endpoints | Completed | `utils/__tests__/nodeCapabilityProbe.spec.ts` | Passed | add-node capability behavior manual | Not Started | None | Updated | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web exec vitest --run utils/__tests__/nodeCapabilityProbe.spec.ts` | conservative defaults (`unknown/degraded`) implemented |
| `/Users/normy/autobyteus_org/autobyteus-web/utils/nodeHostValidation.ts` | node types/endpoints | Completed | `utils/__tests__/nodeHostValidation.spec.ts` | Passed | add-node warning/error manual | Not Started | None | Updated | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web exec vitest --run utils/__tests__/nodeHostValidation.spec.ts` | host mismatch/loopback/insecure-http warnings implemented |
| `/Users/normy/autobyteus_org/autobyteus-web/services/api.ts` | context store | Completed | `services/__tests__/api.nodeRouting.spec.ts` | Passed | REST per-window manual | Not Started | None | Not Needed | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web exec vitest --run services/__tests__/api.nodeRouting.spec.ts` | dynamic per-window REST base URL |
| `/Users/normy/autobyteus_org/autobyteus-web/stores/agentRunStore.ts` | context + apollo | Completed | `stores/__tests__/agentRunStore.spec.ts` | Passed | dual-window run manual | Not Started | None | Not Needed | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web exec vitest --run stores/__tests__/agentRunStore.spec.ts` | agent stream WS now bound to window node |
| `/Users/normy/autobyteus_org/autobyteus-web/stores/agentTeamRunStore.ts` | context + apollo | Completed | `stores/__tests__/agentTeamRunStore.spec.ts` | Passed | dual-window team run manual | Not Started | None | Not Needed | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web exec vitest --run stores/__tests__/agentTeamRunStore.spec.ts` | team stream WS now bound to window node |
| `/Users/normy/autobyteus_org/autobyteus-web/stores/applicationRunStore.ts` | context + apollo | Completed | `stores/__tests__/applicationRunStore.spec.ts` | Passed | app run per-node manual | Not Started | None | Not Needed | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web exec vitest --run stores/__tests__/applicationRunStore.spec.ts` | application team stream WS now bound to window node |
| `/Users/normy/autobyteus_org/autobyteus-web/stores/workspace.ts` | context + apollo | Completed | `stores/__tests__/workspaceStore.spec.ts` | Passed | file stream per-node manual | Not Started | None | Updated | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web exec vitest --run stores/__tests__/workspaceStore.spec.ts` | bound readiness + bound file explorer WS endpoint |
| `/Users/normy/autobyteus_org/autobyteus-web/composables/useTerminalSession.ts` | context store | Completed | `composables/__tests__/useTerminalSession.spec.ts` | Passed | terminal per-window manual | Not Started | None | Not Needed | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web exec vitest --run composables/__tests__/useTerminalSession.spec.ts` | terminal WS endpoint now bound to window node |
| `/Users/normy/autobyteus_org/autobyteus-web/stores/agentDefinitionStore.ts` | bound readiness | Completed | `stores/__tests__/agentDefinitionStore.spec.ts` | Passed | remote fetch with embedded down | Not Started | None | Updated | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web exec vitest --run stores/__tests__/agentDefinitionStore.spec.ts` | replaced `serverStore.waitForServerReady` |
| `/Users/normy/autobyteus_org/autobyteus-web/stores/agentTeamDefinitionStore.ts` | bound readiness | Completed | `stores/__tests__/agentTeamDefinitionStore.spec.ts` | Passed | remote fetch with embedded down | Not Started | None | Updated | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web exec vitest --run stores/__tests__/agentTeamDefinitionStore.spec.ts` | replaced `serverStore.waitForServerReady` |
| `/Users/normy/autobyteus_org/autobyteus-web/stores/fileExplorer.ts` | context store | Completed | `stores/__tests__/fileExplorerStore.spec.ts` | Passed | embedded-vs-remote local path manual | Not Started | None | Updated | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web exec vitest --run stores/__tests__/fileExplorerStore.spec.ts` | switched guard to `isEmbeddedWindow` + bound REST media URL |
| `/Users/normy/autobyteus_org/autobyteus-web/components/workspace/config/WorkspaceSelector.vue` | context store + preload | Completed | `components/workspace/config/__tests__/WorkspaceSelector.spec.ts` | Passed | browse button remote guard manual | Not Started | None | Updated | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web exec vitest --run components/workspace/config/__tests__/WorkspaceSelector.spec.ts` | no remote folder picker |
| `/Users/normy/autobyteus_org/autobyteus-web/components/agentInput/ContextFilePathInputArea.vue` | context store | In Progress | component tests | Not Started | remote native-drop guard manual | Not Started | None | Updated | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web exec vitest --run components` | remote windows now avoid embedded native-drop assumptions |
| `/Users/normy/autobyteus_org/autobyteus-web/components/agentInput/AgentUserInputTextArea.vue` | context store | In Progress | component tests | Not Started | remote native-drop guard manual | Not Started | None | Updated | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web exec vitest --run components` | remote windows now avoid embedded native-drop assumptions |
| `/Users/normy/autobyteus_org/autobyteus-web/pages/settings.vue` | context + server stores | In Progress | `pages/__tests__/settings.spec.ts` | Passed | remote settings surface manual | Not Started | None | Updated | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web exec vitest --run pages/__tests__/settings.spec.ts` | node entry added; embedded-only server sections enforced; remote query fallback and embedded startup default covered |
| `/Users/normy/autobyteus_org/autobyteus-web/components/server/ServerLoading.vue`, `/Users/normy/autobyteus_org/autobyteus-web/components/server/ServerShutdown.vue`, `/Users/normy/autobyteus_org/autobyteus-web/components/server/ServerMonitor.vue`, `/Users/normy/autobyteus_org/autobyteus-web/components/settings/ServerSettingsManager.vue` | context + server stores | In Progress | `components/server/__tests__/ServerLoading.spec.ts`, `components/server/__tests__/ServerShutdown.spec.ts`, `components/server/__tests__/ServerMonitor.spec.ts`, `components/settings/__tests__/ServerSettingsManager.spec.ts` | Passed | embedded-only visibility manual | Not Started | None | Updated | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web exec vitest --run components/server/__tests__/ServerLoading.spec.ts components/server/__tests__/ServerShutdown.spec.ts components/server/__tests__/ServerMonitor.spec.ts components/settings/__tests__/ServerSettingsManager.spec.ts` | embedded controls hidden in remote windows |
| `/Users/normy/autobyteus_org/autobyteus-web/components/workspace/agent/ArtifactContentViewer.vue` | context store | In Progress | `components/workspace/agent/__tests__/ArtifactContentViewer.spec.ts` | Passed | artifact URL per-node manual | Not Started | None | Updated | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web exec vitest --run components/workspace/agent/__tests__/ArtifactContentViewer.spec.ts` | removed static `getServerUrls` |
| `/Users/normy/autobyteus_org/autobyteus-web/components/fileExplorer/viewers/HtmlPreviewer.vue` | context store | In Progress | component tests | Not Started | static preview per-node manual | Not Started | None | Updated | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web exec vitest --run components` | removed static `getServerUrls` |
| `/Users/normy/autobyteus_org/autobyteus-web/app.vue`, `/Users/normy/autobyteus_org/autobyteus-web/layouts/default.vue`, `/Users/normy/autobyteus_org/autobyteus-web/components/settings/NodeManager.vue` | node/context/server stores | In Progress | `__tests__/app.spec.ts`, `layouts/__tests__/default.spec.ts`, `components/settings/__tests__/NodeManager.spec.ts` | Passed | manual node identity + overlay scope | Not Started | None | Updated | 2026-02-08 | `pnpm -C /Users/normy/autobyteus_org/autobyteus-web exec vitest --run __tests__/app.spec.ts layouts/__tests__/default.spec.ts components/settings/__tests__/NodeManager.spec.ts` | node management entry + node identity badge + embedded-only overlays validated in targeted shell tests |
| `/Users/normy/autobyteus_org/autobyteus-web/stores/transcriptionStore.ts`, `/Users/normy/autobyteus_org/autobyteus-web/stores/audioStore.ts`, `/Users/normy/autobyteus_org/autobyteus-web/workers/transcriptionWorker.ts` | N/A | N/A | N/A | N/A | N/A | N/A | Out of Scope | Updated | 2026-02-08 | N/A | removed from v1 due backend support gap |

## Blocked Items
| File | Blocked By | Unblock Condition | Owner/Next Action |
| --- | --- | --- | --- |
| `/Users/normy/autobyteus_org/autobyteus-web/types/electron.d.ts` | repository-wide pre-existing TypeScript baseline failures unrelated to this ticket | run and stabilize baseline typecheck or introduce scoped typecheck command for changed surfaces | proceed with scoped verification (`transpile-electron` + targeted vitest) while keeping this row tracked |

## Design Feedback Loop Log
| Date | Trigger File(s) | Smell Description | Design Doc Section Updated | Update Status | Notes |
| --- | --- | --- | --- | --- | --- |
| 2026-02-08 | `electron/main.ts` | per-window close interception unsuitable for multi-window app behavior | lifecycle rules | Updated | close-vs-quit split |
| 2026-02-08 | `app.vue`, `agentDefinitionStore.ts`, `agentTeamDefinitionStore.ts`, `workspace.ts` | remote windows coupled to embedded readiness | readiness boundary | Updated | bound-node readiness |
| 2026-02-08 | `WorkspaceSelector.vue`, `ContextFilePathInputArea.vue`, `AgentUserInputTextArea.vue`, `fileExplorer.ts` | `isElectron` leaked local FS behavior to remote windows | UI/file guard rules | Updated | `isEmbeddedWindow` guards |
| 2026-02-08 | `pages/settings.vue` + server UI components | embedded server controls shown in remote windows | settings/UI scope rules | Updated | embedded-only surfaces |
| 2026-02-08 | `electron/main.ts` + `serverStatusManager` listener pattern | status fanout ownership can accumulate listeners per window | main-process ownership | Updated | single fanout listener |
| 2026-02-08 | product scope update | transcription is no longer backend-supported | scope management | Updated | marked transcription files as N/A for v1 |
| 2026-02-08 | plugin bootstrap paths (`plugins/serverStore.ts`, `plugins/apolloErrorLink.client.ts`, numbered plugins) | ownership/order ambiguity risk | plugin initialization boundaries | Updated | explicit de-overlap task and tests added |
| 2026-02-08 | add-node onboarding flow | backend-generated URL host mismatch not explicitly validated | onboarding validation boundary | Updated | `nodeHostValidation` added to plan/progress |
| 2026-02-08 | `pages/settings.vue`, `components/settings/NodeManager.vue`, `layouts/default.vue`, `app.vue` | no user-facing add-node entry and unclear per-window node identity/overlay scope | shell + onboarding boundaries | Updated | node settings entry + identity badge + embedded-only overlay gating |
